<UserControl x:Class="ArcadiaTracker.App.Views.ProgressionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="900">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <!-- Header -->
            <TextBlock Text="Progression" Style="{StaticResource HeaderTextStyle}" Margin="0,0,0,8"/>
            <TextBlock Text="Track your journey through the game"
                       Style="{StaticResource SubheaderTextStyle}" Margin="0,0,0,24"/>

            <!-- Phase Timeline -->
            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Game Phases" FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,16"/>

                    <ItemsControl x:Name="PhasesList">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,0,0,12" Padding="16" CornerRadius="8"
                                        BorderThickness="2">
                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Setter Property="Background" Value="{StaticResource SurfaceLightBrush}"/>
                                            <Setter Property="BorderBrush" Value="Transparent"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsCurrent}" Value="True">
                                                    <Setter Property="BorderBrush" Value="{StaticResource PrimaryBrush}"/>
                                                </DataTrigger>
                                                <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                                    <Setter Property="Background" Value="#1A2ED573"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Status Icon -->
                                        <Border Width="32" Height="32" CornerRadius="16"
                                                VerticalAlignment="Top" Margin="0,0,12,0">
                                            <Border.Style>
                                                <Style TargetType="Border">
                                                    <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource SuccessBrush}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsCurrent}" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Border.Style>
                                            <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center"
                                                       FontWeight="Bold">
                                                <TextBlock.Style>
                                                    <Style TargetType="TextBlock">
                                                        <Setter Property="Text" Value="○"/>
                                                        <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                                                <Setter Property="Text" Value="✓"/>
                                                                <Setter Property="Foreground" Value="{StaticResource BackgroundBrush}"/>
                                                            </DataTrigger>
                                                            <DataTrigger Binding="{Binding IsCurrent}" Value="True">
                                                                <Setter Property="Text" Value="▶"/>
                                                                <Setter Property="Foreground" Value="{StaticResource BackgroundBrush}"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </TextBlock.Style>
                                            </TextBlock>
                                        </Border>

                                        <!-- Phase Info -->
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="{Binding Name}"
                                                       FontSize="16" FontWeight="SemiBold"
                                                       Foreground="{StaticResource TextPrimaryBrush}"/>
                                            <TextBlock Text="{Binding Description}"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="12" Margin="0,4,0,0"/>

                                            <!-- Progress Bar (only show if not completed) -->
                                            <ProgressBar Value="{Binding Progress}" Maximum="100"
                                                         Margin="0,12,0,0">
                                                <ProgressBar.Style>
                                                    <Style TargetType="ProgressBar" BasedOn="{StaticResource SciFiProgressBar}">
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                                                <Setter Property="Foreground" Value="{StaticResource SuccessBrush}"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </ProgressBar.Style>
                                            </ProgressBar>
                                        </StackPanel>

                                        <!-- Progress Percentage -->
                                        <TextBlock Grid.Column="2"
                                                   Text="{Binding Progress, StringFormat={}{0:F0}%}"
                                                   FontSize="18" FontWeight="Bold"
                                                   VerticalAlignment="Center" Margin="16,0,0,0">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsCompleted}" Value="True">
                                                            <Setter Property="Foreground" Value="{StaticResource SuccessBrush}"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding IsCurrent}" Value="True">
                                                            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </Border>

            <!-- Quick Stats -->
            <Border Style="{StaticResource CardStyle}">
                <StackPanel>
                    <TextBlock Text="Session Statistics" FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,16"/>

                    <UniformGrid Columns="3">
                        <StackPanel Margin="0,0,16,0">
                            <TextBlock Text="Items Discovered" FontSize="11"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="ItemsDiscoveredText" Text="0"
                                       FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource PrimaryBrush}"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,16,0">
                            <TextBlock Text="Locked Blueprints" FontSize="11"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="LockedBlueprintsText" Text="0"
                                       FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource WarningBrush}"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Badges Earned" FontSize="11"
                                       Foreground="{StaticResource TextMutedBrush}"/>
                            <TextBlock x:Name="BadgesEarnedText" Text="0"
                                       FontSize="24" FontWeight="Bold"
                                       Foreground="{StaticResource SecondaryBrush}"/>
                        </StackPanel>
                    </UniformGrid>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
