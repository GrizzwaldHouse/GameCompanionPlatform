<Window x:Class="ArcadiaTracker.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ArcadiaTracker.App"
        xmlns:views="clr-namespace:ArcadiaTracker.App.Views"
        mc:Ignorable="d"
        Title="Arcadia Tracker"
        Height="800" Width="1200"
        MinHeight="600" MinWidth="900"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundGradientBrush}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar Navigation -->
        <Border Grid.Column="0" Background="{StaticResource SurfaceBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- App Header -->
                <StackPanel Grid.Row="0" Margin="16,20,16,16">
                    <TextBlock Text="ARCADIA"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="{StaticResource PrimaryBrush}"/>
                    <TextBlock Text="TRACKER"
                               FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,2,0,0"/>
                </StackPanel>

                <!-- Session Selector -->
                <Border Grid.Row="1" Margin="12,0,12,16" Padding="8"
                        Background="{StaticResource SurfaceLightBrush}" CornerRadius="6">
                    <StackPanel>
                        <TextBlock Text="SESSION" FontSize="10"
                                   Foreground="{StaticResource TextMutedBrush}" Margin="0,0,0,4"/>
                        <ComboBox x:Name="SessionComboBox"
                                  ItemsSource="{Binding AvailableSessions}"
                                  SelectedValue="{Binding SelectedSession}"
                                  SelectedValuePath="SessionName"
                                  DisplayMemberPath="SessionName"
                                  Background="{StaticResource SurfaceBrush}"
                                  Foreground="{StaticResource TextPrimaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Items -->
                <StackPanel Grid.Row="2" Margin="8,0">
                    <RadioButton x:Name="NavDashboard"
                                 Content="ðŸ“Š Dashboard"
                                 Style="{StaticResource NavButtonStyle}"
                                 IsChecked="True"
                                 Checked="NavItem_Checked"
                                 Tag="Dashboard"/>
                    <RadioButton x:Name="NavProgression"
                                 Content="ðŸ“ˆ Progression"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Progression"/>
                    <RadioButton x:Name="NavMap"
                                 Content="ðŸ—ºï¸ Interactive Map"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Map"/>
                    <RadioButton x:Name="NavRoadmap"
                                 Content="ðŸŽ¯ Roadmap"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Roadmap"/>
                    <RadioButton x:Name="NavProduction"
                                 Content="ðŸ­ Production"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Production"/>
                    <RadioButton x:Name="NavResearch"
                                 Content="ðŸ”¬ Research"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Research"/>
                    <RadioButton x:Name="NavSessions"
                                 Content="ðŸ“… Sessions"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Sessions"/>
                    <RadioButton x:Name="NavPlayStats"
                                 Content="ðŸ“Š Play Stats"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="PlayStats"/>
                    <RadioButton x:Name="NavAchievements"
                                 Content="ðŸ† Achievements"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Achievements"/>

                    <Separator Margin="8,16" Background="{StaticResource SurfaceLightBrush}"/>

                    <RadioButton x:Name="NavExport"
                                 Content="ðŸ“¤ Export"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Export"/>
                    <RadioButton x:Name="NavNotifications"
                                 Content="ðŸ”” Notifications"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Notifications"/>
                    <RadioButton x:Name="NavSettings"
                                 Content="âš™ï¸ Settings"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Settings"/>

                    <!-- Premium Features (capability-gated: only visible when entitled) -->
                    <Separator x:Name="PremiumSeparator" Margin="8,16"
                               Background="{StaticResource SurfaceLightBrush}"
                               Visibility="Collapsed"/>
                    <RadioButton x:Name="NavSaveInspector"
                                 Content="ðŸ” Save Inspector"
                                 Style="{StaticResource PremiumNavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="SaveInspector"
                                 Visibility="Collapsed"/>
                    <RadioButton x:Name="NavBackupManager"
                                 Content="ðŸ’¾ Backup Manager"
                                 Style="{StaticResource PremiumNavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="BackupManager"
                                 Visibility="Collapsed"/>
                    <RadioButton x:Name="NavActivation"
                                 Content="ðŸ”‘ Activate Feature"
                                 Style="{StaticResource NavButtonStyle}"
                                 Checked="NavItem_Checked"
                                 Tag="Activation"
                                 Visibility="Collapsed"/>
                </StackPanel>

                <!-- Status Bar -->
                <Border Grid.Row="3" Padding="16,12" Background="{StaticResource SurfaceLightBrush}">
                    <StackPanel>
                        <TextBlock x:Name="StatusText"
                                   Text="{Binding StatusMessage}"
                                   FontSize="11"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   TextTrimming="CharacterEllipsis"/>
                        <Button Content="â†» Refresh"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Margin="0,8,0,0"
                                Padding="8,4"
                                FontSize="11"
                                Command="{Binding RefreshCommand}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Border Grid.Column="1" Margin="16">
            <ContentControl x:Name="ContentArea"/>
        </Border>

        <!-- Loading Overlay -->
        <Border Grid.Column="0" Grid.ColumnSpan="2"
                Background="#CC0A0A0F"
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="Loading..."
                           FontSize="24"
                           Foreground="{StaticResource PrimaryBrush}"
                           HorizontalAlignment="Center"/>
                <ProgressBar IsIndeterminate="True"
                             Width="200"
                             Height="4"
                             Margin="0,16,0,0"
                             Style="{StaticResource SciFiProgressBar}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
