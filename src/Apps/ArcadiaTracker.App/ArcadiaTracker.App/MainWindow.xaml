<Window x:Class="ArcadiaTracker.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ArcadiaTracker.App"
        xmlns:views="clr-namespace:ArcadiaTracker.App.Views"
        mc:Ignorable="d"
        Icon="Assets/app-icon.ico"
        Title="Arcadia Tracker"
        Height="800" Width="1200"
        MinHeight="600" MinWidth="900"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundGradientBrush}">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar Navigation with layered gradient background -->
        <Border Grid.Column="0">
            <Border.Background>
                <StaticResource ResourceKey="SidebarGradientBrush"/>
            </Border.Background>
            <!-- Subtle noise texture overlay -->
            <Border Background="{StaticResource NoiseTextureBrush}">
                <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- App Header -->
                <StackPanel Grid.Row="0" Margin="16,20,16,16">
                    <TextBlock Text="ARCADIA"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="{StaticResource PrimaryBrush}"/>
                    <TextBlock Text="TRACKER"
                               FontSize="12"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,2,0,0"/>
                </StackPanel>

                <!-- Session Selector -->
                <Border Grid.Row="1" Margin="12,0,12,16" Padding="8"
                        Background="{StaticResource SurfaceLightBrush}" CornerRadius="6">
                    <StackPanel>
                        <TextBlock Text="SESSION" FontSize="10"
                                   Foreground="{StaticResource TextMutedBrush}" Margin="0,0,0,4"/>
                        <ComboBox x:Name="SessionComboBox"
                                  ItemsSource="{Binding AvailableSessions}"
                                  SelectedValue="{Binding SelectedSession}"
                                  SelectedValuePath="SessionName"
                                  DisplayMemberPath="SessionName"
                                  Background="{StaticResource SurfaceBrush}"
                                  Foreground="{StaticResource TextPrimaryBrush}"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Items (scrollable, categorized) -->
                <ScrollViewer Grid.Row="2" Style="{StaticResource SidebarScrollViewer}">
                    <StackPanel Margin="8,0">

                        <!-- â•â•â• OVERVIEW â•â•â• -->
                        <TextBlock Text="OVERVIEW" Style="{StaticResource NavCategoryHeaderStyle}"/>
                        <RadioButton x:Name="NavDashboard"
                                     Style="{StaticResource NavButtonStyle}"
                                     IsChecked="True"
                                     Checked="NavItem_Checked"
                                     Tag="Dashboard">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource DashboardIcon}"
                                      Fill="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"
                                      Width="16" Height="16"
                                      Margin="0,0,8,0"
                                      Stretch="Uniform"
                                      VerticalAlignment="Center"/>
                                <TextBlock Text="Dashboard" VerticalAlignment="Center"/>
                            </StackPanel>
                        </RadioButton>
                        <RadioButton x:Name="NavWizard"
                                     Content="âœ¨ What's Next"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Wizard"/>

                        <!-- â•â•â• ANALYTICS â•â•â• -->
                        <TextBlock Text="ANALYTICS" Style="{StaticResource NavCategoryHeaderStyle}"/>
                        <RadioButton x:Name="NavProgression"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Progression">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource ProgressionIcon}"
                                      Fill="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"
                                      Width="16" Height="16"
                                      Margin="0,0,8,0"
                                      Stretch="Uniform"
                                      VerticalAlignment="Center"/>
                                <TextBlock Text="Progression" VerticalAlignment="Center"/>
                            </StackPanel>
                        </RadioButton>
                        <RadioButton x:Name="NavRecords"
                                     Content="ðŸ… Records"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Records"/>
                        <RadioButton x:Name="NavSessionDiff"
                                     Content="ðŸ“‹ Session Diff"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="SessionDiff"/>
                        <RadioButton x:Name="NavTimeLapse"
                                     Content="â³ Time Lapse"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="TimeLapse"/>
                        <RadioButton x:Name="NavSpeedrun"
                                     Content="âš¡ Speedrun"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Speedrun"/>

                        <!-- â•â•â• BASE MANAGEMENT â•â•â• -->
                        <TextBlock Text="BASE MANAGEMENT" Style="{StaticResource NavCategoryHeaderStyle}"/>
                        <RadioButton x:Name="NavProduction"
                                     Content="ðŸ­ Production"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Production"/>
                        <RadioButton x:Name="NavPowerGrid"
                                     Content="ðŸ”Œ Power Grid"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="PowerGrid"/>
                        <RadioButton x:Name="NavRatioCalculator"
                                     Content="ðŸ“ Ratio Calculator"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="RatioCalculator"/>
                        <RadioButton x:Name="NavBottleneck"
                                     Content="ðŸ”Ž Bottleneck"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Bottleneck"/>
                        <RadioButton x:Name="NavLogisticsHeatmap"
                                     Content="ðŸ—ºï¸ Logistics"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="LogisticsHeatmap"/>

                        <!-- â•â•â• STRATEGY â•â•â• -->
                        <TextBlock Text="STRATEGY" Style="{StaticResource NavCategoryHeaderStyle}"/>
                        <RadioButton x:Name="NavResearch"
                                     Content="ðŸ”¬ Research"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Research"/>
                        <RadioButton x:Name="NavResearchPath"
                                     Content="ðŸ§¬ Research Path"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="ResearchPath"/>
                        <RadioButton x:Name="NavCataclysmPlanner"
                                     Content="ðŸŒ‹ Cataclysm Planner"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="CataclysmPlanner"/>
                        <RadioButton x:Name="NavBuildPlanner"
                                     Content="ðŸ“ Build Planner"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="BuildPlanner"/>
                        <RadioButton x:Name="NavDepletionForecast"
                                     Content="ðŸ“‰ Depletion Forecast"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="DepletionForecast"/>

                        <!-- â•â•â• EXPLORATION â•â•â• -->
                        <TextBlock Text="EXPLORATION" Style="{StaticResource NavCategoryHeaderStyle}"/>
                        <RadioButton x:Name="NavMap"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Map">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{StaticResource MapIcon}"
                                           FontFamily="{StaticResource IconFont}"
                                           FontSize="16"
                                           Foreground="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"
                                           Margin="0,0,8,0"
                                           VerticalAlignment="Center"/>
                                <TextBlock Text="Interactive Map" VerticalAlignment="Center"/>
                            </StackPanel>
                        </RadioButton>
                        <RadioButton x:Name="NavBlueprints"
                                     Content="ðŸ“˜ Blueprints"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Blueprints"/>
                        <RadioButton x:Name="NavExpansionAdvisor"
                                     Content="ðŸ§­ Expansion Advisor"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="ExpansionAdvisor"/>
                        <RadioButton x:Name="NavChallengeTracker"
                                     Content="ðŸ Challenge Tracker"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="ChallengeTracker"/>

                        <!-- â•â•â• META â•â•â• -->
                        <TextBlock Text="META" Style="{StaticResource NavCategoryHeaderStyle}"/>
                        <RadioButton x:Name="NavRoadmap"
                                     Content="ðŸŽ¯ Roadmap"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Roadmap"/>
                        <RadioButton x:Name="NavSessions"
                                     Content="ðŸ“… Sessions"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Sessions"/>
                        <RadioButton x:Name="NavPlayStats"
                                     Content="ðŸ“Š Play Stats"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="PlayStats"/>
                        <RadioButton x:Name="NavAchievements"
                                     Content="ðŸ† Achievements"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Achievements"/>
                        <RadioButton x:Name="NavExport"
                                     Content="ðŸ“¤ Export"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Export"/>
                        <RadioButton x:Name="NavNotifications"
                                     Content="ðŸ”” Notifications"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Notifications"/>
                        <RadioButton x:Name="NavSettings"
                                     Content="âš™ï¸ Settings"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Settings"/>

                        <!-- â•â•â• PREMIUM (capability-gated) â•â•â• -->
                        <Border x:Name="PremiumSeparator" Height="1" Margin="12,16,12,8"
                                Background="{StaticResource AccentGoldBrush}" Opacity="0.3"
                                Visibility="Collapsed"/>
                        <RadioButton x:Name="NavSaveEditor"
                                     Content="âœï¸ Save Editor"
                                     Style="{StaticResource PremiumNavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="SaveEditor"
                                     Visibility="Collapsed"/>
                        <RadioButton x:Name="NavSaveInspector"
                                     Content="ðŸ” Save Inspector"
                                     Style="{StaticResource PremiumNavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="SaveInspector"
                                     Visibility="Collapsed"/>
                        <RadioButton x:Name="NavBackupManager"
                                     Content="ðŸ’¾ Backup Manager"
                                     Style="{StaticResource PremiumNavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="BackupManager"
                                     Visibility="Collapsed"/>
                        <RadioButton x:Name="NavActivation"
                                     Content="ðŸ”‘ Activate Feature"
                                     Style="{StaticResource NavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="Activation"
                                     Visibility="Collapsed"/>
                        <RadioButton x:Name="NavAdminPanel"
                                     Style="{StaticResource PremiumNavButtonStyle}"
                                     Checked="NavItem_Checked"
                                     Tag="AdminPanel"
                                     Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <Path Data="{StaticResource AdminShieldIcon}"
                                      Fill="{Binding RelativeSource={RelativeSource AncestorType=RadioButton}, Path=Foreground}"
                                      Width="16" Height="16"
                                      Margin="0,0,8,0"
                                      Stretch="Uniform"
                                      VerticalAlignment="Center"/>
                                <TextBlock Text="Admin Panel" VerticalAlignment="Center"/>
                            </StackPanel>
                        </RadioButton>

                    </StackPanel>
                </ScrollViewer>

                <!-- Status Bar -->
                <Border Grid.Row="3" Padding="16,12" Background="{StaticResource SurfaceLightBrush}">
                    <StackPanel>
                        <TextBlock x:Name="StatusText"
                                   Text="{Binding StatusMessage}"
                                   FontSize="11"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   TextTrimming="CharacterEllipsis"/>
                        <Button Content="â†» Refresh"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Margin="0,8,0,0"
                                Padding="8,4"
                                FontSize="11"
                                Command="{Binding RefreshCommand}"/>
                    </StackPanel>
                </Border>
                </Grid>
            </Border>
        </Border>

        <!-- Main Content Area with layered gradient background -->
        <Grid Grid.Column="1">
            <!-- Background layer: Radial glow -->
            <Border Background="{StaticResource ContentGlowBrush}" Opacity="0.3"/>
            <!-- Noise texture overlay -->
            <Border Background="{StaticResource NoiseTextureBrush}" Opacity="0.03"/>
            <!-- Content layer -->
            <Border Margin="16">
                <ContentControl x:Name="ContentArea"/>
            </Border>
        </Grid>

        <!-- Loading Overlay -->
        <Border Grid.Column="0" Grid.ColumnSpan="2"
                Background="#CC0A0A0F"
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="Loading..."
                           FontSize="24"
                           Foreground="{StaticResource PrimaryBrush}"
                           HorizontalAlignment="Center"/>
                <ProgressBar IsIndeterminate="True"
                             Width="200"
                             Height="4"
                             Margin="0,16,0,0"
                             Style="{StaticResource SciFiProgressBar}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
