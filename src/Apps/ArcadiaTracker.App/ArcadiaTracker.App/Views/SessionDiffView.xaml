<UserControl x:Class="ArcadiaTracker.App.Views.SessionDiffView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="900">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel>
            <!-- Header -->
            <TextBlock Text="Session Diff" Style="{StaticResource HeaderTextStyle}" Margin="0,0,0,8"/>
            <TextBlock Text="Compare two saves to see what changed"
                       Style="{StaticResource SubheaderTextStyle}" Margin="0,0,0,24"/>

            <!-- Session Selectors -->
            <UniformGrid Columns="2" Margin="0,0,0,16">
                <Border Style="{StaticResource CardStyle}" Margin="0,0,8,0">
                    <StackPanel>
                        <TextBlock Text="BEFORE" FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                        <TextBlock x:Name="BeforeSessionText" Text="{Binding BeforeSessionName, TargetNullValue='Select a save...'}"
                                   FontSize="16" FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   Margin="0,8,0,0"/>
                        <Button x:Name="SelectBeforeButton" Content="Browse..." Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource CardStyle}" Margin="8,0,0,0">
                    <StackPanel>
                        <TextBlock Text="AFTER" FontSize="11"
                                   Foreground="{StaticResource TextMutedBrush}"/>
                        <TextBlock x:Name="AfterSessionText" Text="{Binding AfterSessionName, TargetNullValue='Select a save...'}"
                                   FontSize="16" FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   Margin="0,8,0,0"/>
                        <Button x:Name="SelectAfterButton" Content="Browse..." Margin="0,12,0,0"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- Compare Button -->
            <Button x:Name="CompareButton" Content="Compare Saves" HorizontalAlignment="Center"
                    Padding="24,12" FontSize="14" Margin="0,0,0,24"/>

            <!-- Diff Results -->
            <Border Style="{StaticResource CardStyle}"
                    Visibility="{Binding HasComparison, Converter={StaticResource BoolToVisibility}}">
                <StackPanel>
                    <TextBlock Text="Changes" FontSize="16" FontWeight="SemiBold"
                               Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,16"/>

                    <!-- Delta Grid -->
                    <UniformGrid Columns="3" Margin="0,0,0,16">
                        <!-- Play Time -->
                        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="4">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="â±ï¸ PLAY TIME" FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="{Binding PlayTimeDelta}" FontSize="20" FontWeight="Bold"
                                           Foreground="{StaticResource PrimaryBrush}" HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Data Points -->
                        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="4">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ“Š DATA POINTS" FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="{Binding DataPointsDelta}" FontSize="20" FontWeight="Bold"
                                           Foreground="{StaticResource SecondaryBrush}" HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Cataclysm Wave -->
                        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="4">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="âš¡ WAVES" FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="{Binding WaveDelta}" FontSize="20" FontWeight="Bold"
                                           Foreground="{StaticResource WarningBrush}" HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </UniformGrid>

                    <UniformGrid Columns="3" Margin="0,0,0,16">
                        <!-- Entities Built -->
                        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="4">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ—ï¸ BUILT" FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="{Binding EntitiesBuiltDisplay}" FontSize="20" FontWeight="Bold"
                                           Foreground="{StaticResource SuccessBrush}" HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Entities Destroyed -->
                        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="4">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ’¥ LOST" FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="{Binding EntitiesDestroyedDisplay}" FontSize="20" FontWeight="Bold"
                                           Foreground="{StaticResource DangerBrush}" HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Recipes -->
                        <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="4">
                            <StackPanel HorizontalAlignment="Center">
                                <TextBlock Text="ðŸ“œ RECIPES" FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}" HorizontalAlignment="Center"/>
                                <TextBlock Text="{Binding NewRecipesDisplay}" FontSize="14" FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimaryBrush}" HorizontalAlignment="Center"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </UniformGrid>

                    <!-- Summary Text -->
                    <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16">
                        <TextBlock Text="{Binding Summary}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="Consolas" FontSize="12"/>
                    </Border>
                </StackPanel>
            </Border>

            <!-- Empty State -->
            <Border Style="{StaticResource CardStyle}"
                    Visibility="{Binding HasComparison, Converter={StaticResource BoolToVisibilityInverse}}">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="48">
                    <TextBlock Text="ðŸ”„" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,16"/>
                    <TextBlock Text="{Binding StatusMessage}"
                               FontSize="16" Foreground="{StaticResource TextMutedBrush}"
                               HorizontalAlignment="Center"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
